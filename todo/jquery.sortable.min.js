/* HTML5 Sortable (http://farhadi.ir/projects/html5sortable)  *
Released under the MIT license.  */
(function (a) {
    var
    b, c = a();
    a.fn.sortable = function (d) {
        var e = String(d);
        return
        d = a.extend({
            connectWith: !1
        }, d), this.each(function () {
            if (/^en
able|disable|destroy$/.test(e)) {
                var
                f = a(this).children(a(this).data("items")).attr("draggable", e == "enable
");
                e == "destroy" && f.add(this).removeData("connectWit h
items").off("dragstart.h5s dragend.h5s selectstart.h5s dragover.h5s
dragenter.h5s drop.h5s");
                return
            }
            var
            g, h, f = a(this).children(d.items),
                i = a("<" + (/
^ul|ol$/i.test(this.tagName) ? "li" : "div") + ' class="sortable-
placeholder">');
            f.f ind(d.handle).mousedown(function () {
                g = !0
            }).mouseup(
                function () {
                    g = !1
                }), a(this).da ta("items", d.items), c = c.add(i), d.connectW
            ith && a(d.connectWith).add(this).data("connectWith", d.connectWith), f.a
            ttr("draggable", "true").on("dragstart.h5s", fun ction(c) {
                if (d.handle && !g) return !1;
                g = !1;
                var
                e = c.originalEvent.dataTransfer;
                e.ef fectAllowed = "move", e.setData("Text
", "dummy"), h = (b = a(this)).addClass("sortable-
dragging").index()
            }).on("dragend.h5s", function () {
                b.removeClass("sortable-dragg ing").show(), c.detach(), h != b.index() && f.parent().trig
                ger("sortupdate", {
                    item: b
                }), b = null
            }).not("a[href],
img").on("selectstart.h5s", function () {
                return this.dragDrop && this.dragD
                rop(), !1
            }).end().add([this, i]).on("dragover.h5s dragenter.h5s
drop.h5s", function (e) {
                return !f.is(b) && d.connectWith !== a(b).paren t().d
                ata("connectWith") ? !0 : e.type == "drop" ? (e.stopPropagation(), c.filter(":v
isi ble").after(b), !1) : (e.preventDefault(), e.originalEvent.dataTransfe r.dropEffect = "move", f.is(this) ? (d.forcePlaceholderSize && i.height(b.ou terHeight()), b.hide(), a(this)[i.index() < a(this).index() ? "after" : "befo
re"](i), c.not(i).detach()) : !c.is(this) && !a(this).children(d.items).le ngth && (c.detach(), a(this).append(i)), !1)
            })
        })
    }
})(jQuery);